<!DOCTYPE html>
<html>
<head>
  <title>bookkeepr - {{title|default('keep your books')}}</title>
  <link href="/static/css/bootstrap.min.readable.css" rel="stylesheet" media="screen">
  <link href="/static/css/custom.css" rel="stylesheet">
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="/static/js/bootstrap.min.js"></script>
  <script src="/static/js/bootbox.js"></script>
  <script src="/static/js/spin.js"></script>
  <script src="/static/js/bookkeepr.js"></script>
  <script src="/static/js/jquery.Jcrop.min.js"></script>
  <link href="/static/css/jquery.Jcrop.min.css" rel="stylesheet" type="text/css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div class="container">
        <h1>Crop Image</h1>
        <p class="lead">
            Use your mouse to crop your image to the proper aspect ratio.
            Click Save Image at the bottom of the screen when finished. 
            You can cancel at anytime by pressing Cancel.
        </p>

        <!-- image here -->
        <div>
            <img src="{{img_src}}" id="image-target">

        </div>

        <div>
            <form action="" method="post" name="image-crop">
              {{form.hidden_tag()}}
              {{form.x1()}}
              {{form.x2()}}
              {{form.y1()}}
              {{form.y2()}}
              {{form.w()}}
              {{form.h()}}
              <br>
              <a href="{{url_for('settings')}}"><input class="btn btn-default" type="button" onclick="bookkeepr.deleteKey('{{key}}')" value="Cancel"></a>
              <input class="btn btn-primary" type="submit" value="Save Image">
          </form>
      </div>

      <script>

      jQuery(function($) {
        $('#image-target').Jcrop({
          aspectRatio: 1,
          onSelect: showCoords,
          boxWidth: 450, 
          boxHeight: 400
      });
    });

      function showCoords(c)
      {
        jQuery('#x1').val(c.x);
        jQuery('#y1').val(c.y);
        jQuery('#x2').val(c.x2);
        jQuery('#y2').val(c.y2);
        jQuery('#w').val(c.w);
        jQuery('#h').val(c.h);
    };


    </script>

</div>

</body>
</html>
